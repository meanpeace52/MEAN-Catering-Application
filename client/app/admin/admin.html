<div class="container">
  <p>The delete user and user index api routes are restricted to users with the 'admin' role.</p>

  <uib-tabset active="active">
    <uib-tab index="0" heading="User management">
      <ul class="list-group user-list">
        <li class="list-group-item" ng-repeat="user in admin.users">
          <div class="user-info">
            <strong ng-if="user.role === 'user'">{{user.firstName}} {{user.lastName}} {{user.name}}</strong><br>
            <strong ng-if="user.role === 'caterer'">{{user.companyName}} {{user.name}}</strong><br>
            <span class="text-muted">{{user.email}}</span>
          </div>
          <a ng-click="admin.delete(user)" class="trash"><span class="fa fa-trash fa-2x"></span></a>
        </li>
      </ul>
    </uib-tab>
    <uib-tab index="1" heading="Food types">
      <ul class="list-group user-list">
        <li class="list-group-item" ng-repeat="type in admin.foodTypes">
          <div class="row">
            <div class="col-sm-1">
              <span class="label label-info" ng-if="type.approved">approved</span>
              <span class="label label-warning" ng-if="!type.approved">not approved</span>
            </div>
            <div class="col-sm-6">
              <div class="input-group">
                <input type="text" class="form-control" placeholder="Type new name" ng-model="type.name" />
                <span class="input-group-btn">
                  <a ng-click="admin.approveFoodType(type)" class="btn btn-default" ng-if="!type.approved">Approve</a>
                  <a ng-click="admin.editFoodType(type)" class="btn btn-default">Send changes</a>
                  <a ng-click="admin.deleteFoodType(type)" class="btn btn-danger"><span class="fa fa-trash"></span></a>
                </span>
              </div>
            </div>
          </div>
        </li>
        <li>
          <div class="col-sm-1">
          </div>
          <div class="col-sm-6">
            <br>
            <br>
            <div class="input-group">
              <input class="form-control" type="text" ng-model="ft.newFoodType" />
              <span class="input-group-btn">
                <a class="btn btn-default" ng-click="admin.addFoodType()"><span class="fa fa-plus"></span></a>
              </span>
            </div>
          </div>
        </li>
      </ul>
    </uib-tab>
    <uib-tab index="2" heading="Included in price">
      <ul class="list-group user-list">
        <li class="list-group-item" ng-repeat="iip in admin.includedInPrice">
          <div class="row">
            <div class="col-sm-7">
              <div class="input-group">
                <input type="text" class="form-control" placeholder="Type new name" ng-model="iip.name" />
                <span class="input-group-btn">
                  <a ng-click="admin.editIncludedInPrice(iip)" class="btn btn-default">Send changes</a>
                  <a ng-click="admin.deleteIncludedInPrice(iip)" class="btn btn-danger"><span class="fa fa-trash"></span></a>
                </span>
              </div>
            </div>
          </div>
        </li>
        <li>
          <div class="col-sm-7">
            <br>
            <br>
            <div class="input-group">
              <input class="form-control" type="text" ng-model="ut.newUt" />
              <span class="input-group-btn">
                <a class="btn btn-default" ng-click="admin.addIncludedInPrice()"><span class="fa fa-plus"></span></a>
              </span>
            </div>
          </div>
        </li>
      </ul>
    </uib-tab>
    <uib-tab index="3" heading="Service types">
      <ul class="list-group user-list">
        <li class="list-group-item" ng-repeat="st in admin.serviceTypes">
          <div class="row">
            <div class="col-sm-7">
              <div class="input-group">
                <input type="text" class="form-control" placeholder="Type new name" ng-model="st.name" />
                <span class="input-group-btn">
                  <a ng-click="admin.editServiceType(st)" class="btn btn-default">Send changes</a>
                  <a ng-click="admin.deleteServiceType(st)" class="btn btn-danger"><span class="fa fa-trash"></span></a>
                </span>
              </div>
            </div>
          </div>
        </li>
        <li>
          <div class="col-sm-7">
            <br>
            <br>
            <div class="input-group">
              <input class="form-control" type="text" ng-model="st.newSt" />
              <span class="input-group-btn">
                <a class="btn btn-default" ng-click="admin.addServiceType()"><span class="fa fa-plus"></span></a>
              </span>
            </div>
          </div>
        </li>
      </ul>
    </uib-tab>
    <uib-tab index="4" heading="Events">
      <br />
      <eventsadmin></eventsadmin>
      <button class="btn btn-default" ng-click="open()" style="margin-left: 15px;">Adjust Payment</button>
    </uib-tab>
  </uib-tabset>
  <script type="text/ng-template" id="adjustPayment.html">
    <div class="modal-header">
      <h3 class="modal-title">Payment Adjustments</h3>
    </div>
    <div class="modal-body">
      <uib-tabset active="active">
        <uib-tab index="0" heading="Complete Refund">
          <br />
          <table class="table table-condensed">
            <tr>
              <th>Invoice</th>
              <th>Refund, $</th>
            </tr>
            <tr>
            <td>Service</td>
            <td></td>
          </tr>
            <tr>
              <td>Tax 10%</td>
              <td></td>
            </tr>
            <tr class="bg-info">
              <td><b>Total</b></td>
              <td></td>
            </tr>
            <tr class="bg-warning">
              <td><b>Adjustment</b></td>
              <td></td>
            </tr>
            <tr class="bg-success">
              <td><b>New Total</b></td>
              <td></td>
            </tr>
            <tr><td colspan="2"></td></tr>
            <tr><th colspan="2">Payable</th></tr>
            <tr>
              <td>Service</td>
              <td></td>
            </tr>
            <tr>
              <td>Tax</td>
              <td></td>
            </tr>
            <tr class="bg-warning">
              <td><b>Refund Adjustment</b></td>
              <td></td>
            </tr>
            <tr class="bg-info">
              <td><b>Sub Total</b></td>
              <td></td>
            </tr>
            <tr>
              <td>Comission 10%</td>
              <td></td>
            </tr>
            <tr class="bg-warning">
              <td><b>Caterer Adjustment</b></td>
              <td></td>
            </tr>
            <tr class="bg-primary">
              <td><b>Total Payment</b></td>
              <td></td>
            </tr>
            <tr>
              <td><b>House Account</b></td>
              <td></td>
            </tr>
            <tr>
              <td><b>Charge Off</b></td>
              <td></td>
            </tr>
            <tr class="bg-success"><th colspan="2">Adjustment Balanced</th></tr>
          </table>
        </uib-tab>
        <uib-tab index="1" heading="Partial Refund">

        </uib-tab>
    </div>
    <div class="modal-footer">
      <button class="btn btn-primary" type="button" ng-click="ok()">OK</button>
      <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button>
    </div>
  </script>
</div>
